##第一周
#### 第1讲
1.
操作系统接到了用户的请求之后 就会根据用户提供的文件名 到磁盘上找到这个程序的相关信息 找到信息之后，会去检查这个程序 是不是一个可执行文件，因为有的时候我们 的一个文件它不是可执行文件，那么操作系统就不能执行这个文件 就会去报错，那么如果是一个可执行文件，操作系统才能正确地执行 在检查完类型之后，操作系统会根据程序首部信息 来确定代码和数据在这个可执行文件当中的位置 并计算出它相应的磁盘块地址


操作系统首先要创建一个新的进程 并将helloworld程序的可执行文件格式 映射到该进程结构 表示由该进程来执行这个helloworld程序 做完了这件事情，操作系统就把控制权 交给了调度程序，我们假设调度程序 正好选中了helloworld程序，那么 由操作系统为这个helloworld程序设置CPU 上下文环境，并跳到程序的开始之处 准备执行这条这个程序，那么下一个指令周期就是执行helloworld程序了

#### 第2讲
1. 方便使用: 用户界面和编程接口
2. 管理资源要用到数据结构和算法:  
确定资源分配策略:
(1) 静态分配资源: 会导致资源的浪费
(2) 动态分配资源
3. 资源管理角度的五大基本功能:
(1) 进程线程管理 (CPU管理)
(2) 存储管理
(3) 文件管理
(4) 设备管理
(5) 用户接口
4. 硬件操作复杂繁琐. 操作系统对硬件抽象, 提高可编程性

#### 第3讲
1. 操作系统的特征:
(1) 并发: 处理多个同时性的活动.
(2) 共享: 操作系统与多个用户的程序共同使用计算机系统的资源. 互斥共享 和 同时共享
(3) 虚拟: 一个物理实体映射为多个对应的逻辑实体 -- 分时或者分空间
(4) 随机: 必须随时对以不可预测的次序发生的事件进行响应并处理. 
进程的运行速度不可预知. 难以重现系统在某个时刻的状态.

#### 第4讲
windows架构几乎所有的硬件相关操作都被封装在: HAL(硬件抽象层), kernal(内核层)两层

#### 第5讲
操作系统分类:   
- 批处理操作系统: Spooling系统(simultaneous peripheral operation on-line 同时的外部设备联机操作计数, 1961),是用磁盘做缓冲 将输入、 计算、 输出分别组织成独立的任务流 在一台计算机上执行，使得输入、 输出和计算真正并行.   
输入进程 作业调度 作业处理 输出进程
- 分布式操作系统: 或以计算机网络为基础, 或以多处理机为基础, 基本特征是处理分布在不同的计算机上

### 第二周
1. CPU中的寄存器可以分为__用户可见寄存器__和__控制和状态寄存器__. 后者用于控制处理器的操作, 由操作系统代码使用.在某种特权级别下可以访问 修改.  
常见的控制和状态寄存器:   
- PC(program count)程序计数器, 记录将要取出的指令的地址  
- IR(instruction register)指令寄存器, 记录最近取出的指令
- PSW(program state word) 程序状态字, 记录处理器的运行状态如条件码 模式 控制位等信息.

2. 操作系统的需求: 保护  
实现保护与控制. 需要硬件提供基本运行机制: 
- 处理器具有特权级别, 能在不同特权级运行不同的指令
- 硬件机制可分离OS和用户程序

操作系统两种CPU状态: 内核态 用户态  
指令分为特权指令(privilege command)和非特权指令

e.g. X86架构支持4个处理器特权级别: R0(内核态), R1,R2, R3(用户态)

用户态->内核态唯一途径: 中断/异常/陷入机制  
内核态->用户态: 设置PSW  
特殊指令: 陷入指令(访管指令,因为内核态也称为supervisor mode). 提供给用户程序的接口, 用于调用操作系统的功能(int, trap, syscall, sysenter/sysexit)



